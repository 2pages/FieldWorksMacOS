<?xml version="1.0" encoding="utf-8"?>
<Project xmlns="http://schemas.microsoft.com/developer/msbuild/2003">

	<!-- call preparatory Windows targets -->
	<Target Name="initWindows" Condition="'$(OS)'=='Windows_NT'"
			DependsOnTargets="Initialize;graphite2Windows;Unit++">
	</Target>

	<Target Name="cleanWindows" Condition="'$(OS)'=='Windows_NT'" DependsOnTargets="clean-graphite2Windows">
	</Target>

	<ItemGroup>
		<UnitSources Include="$(fwrt)\Lib\src\unit++\*.*" Condition="'$(OS)'=='Windows_NT'"/>
	</ItemGroup>
	<Target Name="Unit++" Inputs="@(UnitSources)" Outputs="$(fwrt)\Lib\$(config-lower)\unit++.lib" Condition="'$(OS)'=='Windows_NT'">
		<MSBuild Projects="$(fwrt)\Lib\src\unit++\VS\unit++.vcxproj"
			Properties="Configuration=$(config-capital)"/>
	</Target>

	<ItemGroup>
		<Graphite2Sources Include="$(fwrt)\Lib\src\graphite2\src\*.*" />
	</ItemGroup>
	<Target Name="graphite2Windows" Inputs="@(Graphite2Sources)" Outputs="$(fwrt)\Lib\$(config-lower)\graphite2.lib" Condition="'$(action)'!='clean'">
		<Make Makefile="$(fwrt)\Lib\src\graphite2\graphite2.mak"
				Configuration="$(config-capital)"
				BuildRoot="$(fwrt)"
				WorkingDirectory="$(fwrt)\Lib\src\graphite2"/>
		<Message Text="Finished building graphite2."/>
	</Target>
	<Target Name="clean-graphite2Windows">
		<Make Makefile="$(fwrt)\Lib\src\graphite2\graphite2.mak"
				Configuration="$(config-capital)"
				BuildRoot="$(fwrt)"
				Target="clean"
				WorkingDirectory="$(fwrt)\Lib\src\graphite2"/>
		<Message Text="Finished building graphite2."/>
	</Target>
</Project>
